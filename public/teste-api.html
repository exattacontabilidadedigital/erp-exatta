<!DOCTYPE html>
<html>
<head>
    <title>Teste API</title>
</head>
<body>
    <h1>Teste da API buscar-existentes</h1>
    <button onclick="testarAPI()">Testar API</button>
    <div id="resultado"></div>

    <script>
        async function testarAPI() {
            console.log('üß™ Testando API...');
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = 'Carregando...';

            try {
                // Teste 1: Busca simples
                console.log('üìã TESTE 1: Busca simples');
                const response1 = await fetch('/api/conciliacao/buscar-existentes?page=1&limit=5&status=pendente');
                const data1 = await response1.json();
                console.log('‚úÖ Resultado 1:', data1);

                // Teste 2: Busca com valor absoluto
                console.log('üìã TESTE 2: Busca com valor absoluto');
                const response2 = await fetch('/api/conciliacao/buscar-existentes?page=1&limit=20&status=pendente&valorMin=8.50&valorMax=11.50&buscarValorAbsoluto=true');
                const data2 = await response2.json();
                console.log('‚úÖ Resultado 2:', data2);

                resultado.innerHTML = `
                    <h3>Teste 1 (Simples):</h3>
                    <p>Total: ${data1.total}</p>
                    <p>Lan√ßamentos: ${data1.lancamentos?.length || 0}</p>
                    
                    <h3>Teste 2 (Valor Absoluto):</h3>
                    <p>Total: ${data2.total}</p>
                    <p>Lan√ßamentos: ${data2.lancamentos?.length || 0}</p>
                    <p>Filtro Absoluto: ${data2.filtros?.buscarValorAbsoluto}</p>
                `;

            } catch (error) {
                console.error('‚ùå Erro:', error);
                resultado.innerHTML = 'Erro: ' + error.message;
            }
        }
    </script>
</body>
</html>
